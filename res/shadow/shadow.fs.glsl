#version 330varying vec4 ShadowCoord0;varying vec2 texCoord0;varying vec3 normals0;uniform sampler2D diffuse;uniform sampler2DShadow shadowMap;out vec4 gl_FragColor;void main(){	vec4 LightColor = vec4(1,1,1,1);	materialDiffuse = texture2D(diffuse,texCoord0)		* clamp(dot(-vec3(0,0,1),normals0),0.4,0.9);	float visibility = texture( shadowMap, vec3(ShadowCoord0.xy, (ShadowCoord0.z)/ShadowCoord0.w) );	gl_FragColor = visibility * materialDiffuse * LightColor; }//vec4(1.0, 0.0, 0.0, 1.0);